{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "data-table-pagination",
  "title": "DataTable Pagination",
  "description": "Full-featured pagination controls with page size selector, page navigation, and row count display.",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "https://niko-table.com/r/data-table.json",
    "button",
    "select",
    "input",
    "skeleton"
  ],
  "files": [
    {
      "path": "src/components/niko-table/components/data-table-pagination.tsx",
      "content": "\"use client\"\n\nimport { useDataTable } from \"../core\"\nimport {\n  TablePagination,\n  type TablePaginationProps,\n} from \"../filters/table-pagination\"\n\ntype DataTablePaginationProps<TData> = Omit<\n  TablePaginationProps<TData>,\n  \"table\" | \"isLoading\"\n> & {\n  /**\n   * Override the loading state from context\n   */\n  isLoading?: boolean\n}\n\nexport function DataTablePagination<TData>({\n  isLoading: externalLoading,\n  ...props\n}: DataTablePaginationProps<TData>) {\n  const { table, isLoading: contextLoading } = useDataTable<TData>()\n\n  // Use external loading if provided, otherwise use context loading\n  const isLoading = externalLoading ?? contextLoading\n\n  return <TablePagination table={table} isLoading={isLoading} {...props} />\n}\n\n/**\n * @required displayName is required for auto feature detection\n * @see \"feature-detection.ts\"\n */\n\nDataTablePagination.displayName = \"DataTablePagination\"\n",
      "type": "registry:component",
      "target": "components/niko-table/components/data-table-pagination.tsx"
    },
    {
      "path": "src/components/niko-table/filters/table-pagination.tsx",
      "content": "\"use client\"\nimport React from \"react\"\nimport { type Table } from \"@tanstack/react-table\"\nimport { Button } from \"@/components/ui/button\"\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\"\nimport { Input } from \"@/components/ui/input\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\n\nexport interface TablePaginationProps<TData> {\n  table: Table<TData>\n  pageSizeOptions?: number[]\n  defaultPageSize?: number\n  /**\n   * External loading state (e.g., from API)\n   */\n  isLoading?: boolean\n  /**\n   * External fetching state (e.g., from TanStack Query).\n   * Used for displaying loading indicators, but doesn't disable pagination by default.\n   */\n  isFetching?: boolean\n  /**\n   * Explicitly disable the next page button.\n   * Useful when you want to prevent navigation during initial load but allow it during background fetching.\n   */\n  disableNextPage?: boolean\n  /**\n   * Explicitly disable the previous page button.\n   * Useful when you want to prevent navigation during initial load but allow it during background fetching.\n   */\n  disablePreviousPage?: boolean\n  /**\n   * Total count of items from server (for server-side pagination).\n   * If provided, this will be used instead of table.getFilteredRowModel().rows.length\n   */\n  totalCount?: number\n  onPageSizeChange?: (pageSize: number, pageIndex: number) => void\n  onPageChange?: (pageIndex: number) => void\n  onNextPage?: (pageIndex: number) => void\n  onPreviousPage?: (pageIndex: number) => void\n  /**\n   * Callback when pagination initialization is complete\n   */\n  onPaginationReady?: () => void\n}\nexport function TablePagination<TData>({\n  table,\n  pageSizeOptions = [10, 25, 50, 100],\n  defaultPageSize = pageSizeOptions[0],\n  isLoading,\n  isFetching,\n  disableNextPage,\n  disablePreviousPage,\n  totalCount,\n  onPageSizeChange,\n  onPageChange,\n  onNextPage,\n  onPreviousPage,\n  onPaginationReady,\n}: TablePaginationProps<TData>) {\n  const { pageIndex, pageSize } = table.getState().pagination\n\n  // Use totalCount if provided (server-side), otherwise use filtered row model (client-side)\n  const totalRows = totalCount ?? table.getFilteredRowModel().rows.length\n  const startItem = totalRows === 0 ? 0 : pageIndex * pageSize + 1\n  const endItem = Math.min((pageIndex + 1) * pageSize, totalRows)\n  const totalPages = table.getPageCount()\n  const currentPage = pageIndex + 1\n\n  // Determine if buttons should be disabled\n  // Default to isLoading for initial load, but allow explicit overrides\n  // Also disable during fetching to prevent navigation while data is loading\n  const canNextPage = table.getCanNextPage()\n  const isDisabled = isLoading || isFetching\n  const canGoNext = !disableNextPage && !isDisabled && canNextPage\n  const canGoPrevious =\n    !disablePreviousPage && !isDisabled && table.getCanPreviousPage()\n\n  // Set default page size on initial render\n  React.useEffect(() => {\n    if (pageSize !== defaultPageSize) {\n      table.setPageSize(defaultPageSize)\n    }\n    onPaginationReady?.()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  // Show loading skeleton while initializing\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-between px-4 py-2\">\n        <div className=\"flex items-center space-x-2\">\n          <Skeleton className=\"h-8 w-24\" />\n          <Skeleton className=\"h-8 w-16\" />\n        </div>\n\n        <Skeleton className=\"h-8 w-32\" />\n\n        <div className=\"flex items-center space-x-4\">\n          <div className=\"flex items-center space-x-2\">\n            <Skeleton className=\"h-8 w-12\" />\n            <Skeleton className=\"h-8 w-20\" />\n          </div>\n\n          <div className=\"flex items-center space-x-1\">\n            <Skeleton className=\"h-8 w-8\" />\n            <Skeleton className=\"h-8 w-8\" />\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <nav\n      className=\"flex items-center justify-between px-4 py-2\"\n      aria-label=\"Table pagination\"\n    >\n      <div className=\"flex items-center space-x-2\">\n        <span\n          className=\"text-sm text-muted-foreground\"\n          id=\"pagination-page-size-label\"\n        >\n          Items per page\n        </span>\n        <Select\n          value={`${Number(pageSize) === 0 ? defaultPageSize : Number(pageSize)}`}\n          onValueChange={value => {\n            const newPageSize = Number(value)\n            table.setPageSize(newPageSize)\n            onPageSizeChange?.(newPageSize, pageIndex)\n          }}\n          disabled={isLoading}\n        >\n          <SelectTrigger\n            className=\"h-8 w-16 focus:ring-0\"\n            aria-label=\"Select page size\"\n            aria-labelledby=\"pagination-page-size-label\"\n          >\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            {pageSizeOptions?.map(size => (\n              <SelectItem key={size} value={`${size}`}>\n                {size}\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      </div>\n\n      <div\n        className=\"text-sm text-muted-foreground\"\n        role=\"status\"\n        aria-live=\"polite\"\n        aria-atomic=\"true\"\n      >\n        {totalRows === 0\n          ? \"0 items\"\n          : `${startItem}-${endItem} of ${totalRows} items`}\n      </div>\n\n      <div className=\"flex items-center space-x-4\">\n        <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n          <label htmlFor=\"page-number-input\" className=\"sr-only\">\n            Page number\n          </label>\n          <Input\n            id=\"page-number-input\"\n            type=\"number\"\n            min=\"1\"\n            max={totalPages}\n            value={currentPage}\n            onChange={e => {\n              const page = Number(e.target.value)\n              if (page >= 1 && page <= totalPages) {\n                const newPageIndex = page - 1\n                table.setPageIndex(newPageIndex)\n                onPageChange?.(newPageIndex)\n              }\n            }}\n            onBlur={e => {\n              const page = Number(e.target.value)\n              if (isNaN(page) || page < 1 || page > totalPages) {\n                if (e.currentTarget) {\n                  e.currentTarget.value = currentPage.toString()\n                }\n              }\n            }}\n            className=\"h-8 min-w-12 text-center\"\n            style={{\n              width: `${Math.max(String(totalPages).length, 2) + 1}ch`,\n            }}\n            disabled={totalPages === 0 || isLoading || isFetching}\n            aria-label={`Page ${currentPage} of ${totalPages}`}\n          />\n          <span aria-hidden=\"true\">of {Math.max(1, totalPages)} pages</span>\n        </div>\n\n        <div className=\"flex items-center space-x-1\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"h-8 w-8 p-0\"\n            onClick={() => {\n              const newPageIndex = pageIndex - 1\n              table.previousPage()\n              onPreviousPage?.(newPageIndex)\n            }}\n            disabled={!canGoPrevious}\n            aria-label={`Go to previous page, page ${pageIndex}`}\n            title=\"Go to previous page\"\n          >\n            <ChevronLeft className=\"h-4 w-4\" aria-hidden=\"true\" />\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"h-8 w-8 p-0\"\n            onClick={() => {\n              const newPageIndex = pageIndex + 1\n              table.nextPage()\n              onNextPage?.(newPageIndex)\n            }}\n            disabled={!canGoNext}\n            aria-label={`Go to next page, page ${pageIndex + 2}`}\n            title=\"Go to next page\"\n          >\n            <ChevronRight className=\"h-4 w-4\" aria-hidden=\"true\" />\n          </Button>\n        </div>\n      </div>\n    </nav>\n  )\n}\n\n/**\n * @required displayName is required for auto feature detection\n * @see \"feature-detection.ts\"\n */\n\nTablePagination.displayName = \"TablePagination\"\n",
      "type": "registry:component",
      "target": "components/niko-table/filters/table-pagination.tsx"
    }
  ],
  "type": "registry:component"
}