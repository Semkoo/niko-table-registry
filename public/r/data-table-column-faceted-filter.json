{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "data-table-column-faceted-filter",
  "title": "DataTable Column Faceted Filter",
  "description": "Column header faceted filter with multi-select options in a dropdown.",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "https://niko-table.com/r/data-table.json",
    "button",
    "dropdown-menu",
    "tooltip",
    "popover",
    "command"
  ],
  "files": [
    {
      "path": "src/components/niko-table/components/data-table-column-faceted-filter.tsx",
      "content": "\"use client\"\n\nimport React from \"react\"\nimport type { Column } from \"@tanstack/react-table\"\n\nimport {\n  TableColumnFacetedFilterOptions,\n  TableColumnFacetedFilterMenu,\n} from \"../filters/table-column-faceted-filter\"\nimport { useDataTable } from \"../core\"\nimport { useColumnHeaderContext } from \"./data-table-column-header\"\n\n/**\n * Faceted filter options for composing inside DataTableColumnActions using context.\n */\nexport function DataTableColumnFacetedFilterOptions<TData, TValue>(\n  props: Omit<\n    React.ComponentProps<typeof TableColumnFacetedFilterOptions>,\n    \"column\"\n  > & {\n    column?: Column<TData, TValue>\n  },\n) {\n  const context = useColumnHeaderContext<TData, TValue>(false)\n  const column = props.column || context?.column\n\n  if (!column) {\n    console.warn(\n      \"DataTableColumnFacetedFilterOptions must be used within DataTableColumnHeaderRoot or provided with a column prop\",\n    )\n    return null\n  }\n\n  return <TableColumnFacetedFilterOptions column={column} {...props} />\n}\n\nDataTableColumnFacetedFilterOptions.displayName =\n  \"DataTableColumnFacetedFilterOptions\"\n\n/**\n * Standalone faceted filter menu for column header using context.\n */\nexport function DataTableColumnFacetedFilterMenu<TData, TValue>(\n  props: Omit<\n    React.ComponentProps<typeof TableColumnFacetedFilterMenu>,\n    \"column\" | \"table\"\n  > & {\n    column?: Column<TData, TValue>\n  },\n) {\n  const context = useColumnHeaderContext<TData, TValue>(false)\n  const column = props.column || context?.column\n  const { table } = useDataTable<TData>()\n\n  if (!column) {\n    console.warn(\n      \"DataTableColumnFacetedFilterMenu must be used within DataTableColumnHeaderRoot or provided with a column prop\",\n    )\n    return null\n  }\n\n  return (\n    <TableColumnFacetedFilterMenu column={column} table={table} {...props} />\n  )\n}\n\nDataTableColumnFacetedFilterMenu.displayName =\n  \"DataTableColumnFacetedFilterMenu\"\n",
      "type": "registry:component",
      "target": "components/niko-table/components/data-table-column-faceted-filter.tsx"
    },
    {
      "path": "src/components/niko-table/filters/table-column-faceted-filter.tsx",
      "content": "\"use client\"\n\nimport React from \"react\"\nimport type { Column, Table } from \"@tanstack/react-table\"\nimport { CircleHelp, Filter } from \"lucide-react\"\n\nimport {\n  DropdownMenuSeparator,\n  DropdownMenuLabel,\n} from \"@/components/ui/dropdown-menu\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\nimport {\n  TableFacetedFilter,\n  TableFacetedFilterContent,\n  useTableFacetedFilter,\n} from \"./table-faceted-filter\"\nimport { useDerivedColumnTitle } from \"../hooks\"\nimport type { Option } from \"../types\"\n\n/**\n * A standard filter trigger button (Funnel icon).\n */\nexport function TableColumnFilterTrigger<TData, TValue>({\n  column,\n  ...props\n}: {\n  column: Column<TData, TValue>\n} & React.ComponentProps<\"button\">) {\n  const isFiltered = column.getIsFiltered()\n\n  return (\n    <button\n      className={`size-7 transition-opacity ${\n        isFiltered ? \"text-primary\" : \"\"\n      }`}\n      {...props}\n    >\n      <Filter className=\"size-3.5\" />\n      <span className=\"sr-only\">Filter column</span>\n    </button>\n  )\n}\n\n/**\n * Faceted filter options for composing inside TableColumnActions.\n * Renders as inline searchable menu with checkboxes.\n *\n * @example\n * ```tsx\n * // Inside TableColumnActions\n * <TableColumnActions column={column}>\n *   <TableColumnFacetedFilterOptions\n *     column={column}\n *     options={[{ label: \"Active\", value: \"active\" }]}\n *     multiple\n *   />\n * </TableColumnActions>\n * ```\n */\nexport function TableColumnFacetedFilterOptions<TData, TValue>({\n  column,\n  title,\n  options = [],\n  onValueChange,\n  multiple = true,\n  withSeparator = true,\n}: {\n  column: Column<TData, TValue>\n  title?: string\n  options?: Option[]\n  onValueChange?: (value: string[] | undefined) => void\n  /** Whether to allow multiple selections. Defaults to true. */\n  multiple?: boolean\n  /** Whether to render a separator before the options. Defaults to true. */\n  withSeparator?: boolean\n}) {\n  const { selectedValues, onItemSelect, onReset } = useTableFacetedFilter({\n    column: column as Column<TData, unknown>,\n    onValueChange,\n    multiple,\n  })\n\n  const derivedTitle = useDerivedColumnTitle(column, column.id, title)\n  const labelText = multiple ? \"Column Multi Select\" : \"Column Select\"\n  const tooltipText = multiple\n    ? \"Select multiple options to filter\"\n    : \"Select a single option to filter\"\n\n  return (\n    <>\n      {withSeparator && <DropdownMenuSeparator />}\n      <DropdownMenuLabel className=\"flex items-center justify-between text-xs font-normal text-muted-foreground\">\n        <span>{labelText}</span>\n        <Tooltip>\n          <TooltipTrigger asChild>\n            <CircleHelp className=\"size-3.5 cursor-help\" />\n          </TooltipTrigger>\n          <TooltipContent side=\"right\">\n            {tooltipText}\n            {derivedTitle && ` - ${derivedTitle}`}\n          </TooltipContent>\n        </Tooltip>\n      </DropdownMenuLabel>\n      <TableFacetedFilterContent\n        title={derivedTitle}\n        options={options}\n        selectedValues={selectedValues}\n        onItemSelect={onItemSelect}\n        onReset={onReset}\n      />\n    </>\n  )\n}\n\n/**\n * Standalone faceted filter menu for column headers.\n * Shows a filter button that opens a popover with filter options.\n *\n * @example\n * ```tsx\n * // Standalone usage\n * <TableColumnFacetedFilterMenu\n *   column={column}\n *   options={[{ label: \"Active\", value: \"active\" }]}\n * />\n * ```\n */\nexport function TableColumnFacetedFilterMenu<TData, TValue>({\n  column,\n  title,\n  options,\n  onValueChange,\n  multiple,\n  ...props\n}: Omit<\n  React.ComponentProps<typeof TableFacetedFilter>,\n  \"column\" | \"trigger\"\n> & {\n  column: Column<TData, TValue>\n  table?: Table<TData>\n  title?: string\n  options?: React.ComponentProps<typeof TableFacetedFilter>[\"options\"]\n}) {\n  const derivedTitle = useDerivedColumnTitle(column, column.id, title)\n\n  return (\n    <TableFacetedFilter\n      column={column}\n      title={derivedTitle}\n      options={options || []}\n      multiple={multiple}\n      onValueChange={onValueChange}\n      trigger={<TableColumnFilterTrigger column={column} />}\n      {...props}\n    />\n  )\n}\n\nTableColumnFacetedFilterOptions.displayName = \"TableColumnFacetedFilterOptions\"\nTableColumnFacetedFilterMenu.displayName = \"TableColumnFacetedFilterMenu\"\n",
      "type": "registry:component",
      "target": "components/niko-table/filters/table-column-faceted-filter.tsx"
    }
  ],
  "type": "registry:component"
}