---
title: Column DnD Table
description: Drag-and-drop column reordering with composable primitives.
---

import CodePreview from "@/components/markdown/code-preview/code-preview.astro"
import CollapsiblePreview from "@/components/markdown/collapsible-preview.astro"
import CliCommandCode from "@/components/markdown/cli-command-code/cli-command-code.astro"

## Overview

<CodePreview demo="niko-table/column-dnd" />

<CollapsiblePreview>
  <CodePreview demo="niko-table/column-dnd-state" />
</CollapsiblePreview>

## Virtualized Column DnD

For large datasets, use `DataTableVirtualizedDndHeader` and `DataTableVirtualizedDndColumnBody` which combine row virtualization with column drag-and-drop.

<CodePreview demo="niko-table/virtualized-column-dnd" />

## Introduction

Column DnD lets users reorder table columns by dragging headers. Built with `@dnd-kit` and composable primitives following the shadcn/ui open-code pattern.

## Installation

1. Add the required shadcn/ui components:

<CliCommandCode action="run" command="shadcn@latest add table" />

2. Add dependencies:

<CliCommandCode action="install" command="@tanstack/react-table @dnd-kit/core @dnd-kit/modifiers @dnd-kit/sortable @dnd-kit/utilities" />

3. **Update the Shadcn table component** — Replace the contents of `components/ui/table.tsx` with the DataTable-compatible version (adds `TableComponent` export and `data-slot` attributes). See the [Installation Guide](/getting-started/installation#update-shadcn-table-component-first) for the full code.

4. **Install the DataTable core** — From your project root, run:

<CliCommandCode action="run" command={'shadcn@latest add "https://niko-table.com/r/data-table.json"'} />

5. **Install add-ons for this example** — This example uses column drag-and-drop. Run:

<CliCommandCode action="run" command={'shadcn@latest add "https://niko-table.com/r/data-table-column-dnd.json"'} />

For other add-ons or manual copy-paste, see the [Installation Guide](/getting-started/installation).

## Basic Column DnD

Three components work together:

1. **`DataTableColumnDndProvider`** — Wraps the table with horizontal DnD context
2. **`DataTableDndHeader`** — Renders headers as draggable items
3. **`DataTableDndColumnBody`** — Cells follow column drag position

```tsx showLineNumbers title="column-dnd.tsx"
const [columnOrder, setColumnOrder] = React.useState<string[]>(() =>
  columns.map(c => c.id as string),
)

return (
  <DataTableRoot
    data={data}
    columns={columns}
    state={{ columnOrder }}
    onColumnOrderChange={setColumnOrder}
  >
    <DataTableColumnDndProvider
      columnOrder={columnOrder}
      onColumnOrderChange={setColumnOrder}
    >
      <DataTable>
        <DataTableDndHeader />
        <DataTableDndColumnBody />
      </DataTable>
    </DataTableColumnDndProvider>
  </DataTableRoot>
)
```

## Key Points

- Every column needs an explicit **`id`** field for column order tracking
- **`columnOrder`** state must be passed to both `DataTableRoot` and `DataTableColumnDndProvider`
- Headers are draggable by default — grab any header to reorder
- **Safe to combine with sorting and filtering** — column order is independent of data order, unlike [Row DnD](/niko-table/row-dnd-table)

## When to Use

**✅ Use Column DnD when:**

- Users want to customize their table layout
- Different users prefer different column arrangements
- Building configurable dashboards

**❌ Consider other options when:**

- Column order is fixed by design
- Tables have very few columns

## Next Steps

- [Row DnD Table](/niko-table/row-dnd-table) — Drag-and-drop row reordering
- [Virtualization Table](/niko-table/virtualization-table) — Virtual scrolling for large datasets
- [Column Pinning Table](/niko-table/column-pinning-table) — Pin columns to edges
