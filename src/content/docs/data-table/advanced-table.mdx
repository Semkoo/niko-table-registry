---
title: Advanced Filter Table
description: Rule-based filtering for complex datasets where users can define custom rules for data visibility.
---

import CodePreview from "@/components/markdown/code-preview/code-preview.astro"
import CollapsiblePreview from "@/components/markdown/collapsible-preview.astro"

<CodePreview demo="data-table/advanced" />

<CollapsiblePreview>
  <CodePreview demo="data-table/advanced-state" />
</CollapsiblePreview>

## Introduction

The Advanced Table demonstrates rule-based filtering with `DataTableFilterMenu` and `DataTableSortMenu` for complex filtering scenarios. Users can create multiple filter rules, combine them with AND/OR operators, and manage sorting with a visual interface.

## Installation

1. Add the required components:

```bash
npx shadcn@latest add table input button dropdown-menu popover command checkbox select scroll-area separator skeleton tooltip
```

2. Add `tanstack/react-table` dependency:

```bash
npm install @tanstack/react-table
```

**Required: Sortable Component**

This example uses `DataTableSortMenu` and `DataTableFilterMenu` which require the Sortable component for drag-and-drop reordering. Follow the [DiceUI Sortable installation guide](https://www.diceui.com/docs/components/sortable).

3. Copy the DataTable components into your project. See the [Installation Guide](/getting-started/installation) for detailed instructions.

## Prerequisites

We are going to build a table to show products with advanced filtering. Here's what our data looks like:

```tsx showLineNumbers
type Product = {
  id: string
  name: string
  category: string
  brand: string
  price: number
  stock: number
  rating: number
  inStock: boolean
  releaseDate: Date
}

const categoryOptions = [
  { label: "Electronics", value: "electronics" },
  { label: "Clothing", value: "clothing" },
  { label: "Sports", value: "sports" },
]

// Brand options can be auto-generated from data using meta.autoOptions
```

## Basic Table with Advanced Filters

Let's start by building a table with rule-based filtering.

### Column Definitions

First, we'll define our columns with filter metadata.

```tsx showLineNumbers title="columns.tsx"
"use client"

import { TableColumnHeader } from "@/components/data-table/components"
import type { DataTableColumnDef } from "@/components/data-table/types"

export type Product = {
  id: string
  name: string
  category: string
  brand: string
  price: number
  stock: number
  rating: number
  inStock: boolean
  releaseDate: Date
}

const categoryOptions = [
  { label: "Electronics", value: "electronics" },
  { label: "Clothing", value: "clothing" },
  { label: "Sports", value: "sports" },
]

const brandOptions = [
  { label: "Apple", value: "apple" },
  { label: "Samsung", value: "samsung" },
  { label: "Nike", value: "nike" },
]

export const columns: DataTableColumnDef<Product>[] = [
  {
    accessorKey: "name",
    header: ({ column }) => <TableColumnHeader column={column} />,
    meta: {
      label: "Product Name",
      variant: "text",
    },
    enableColumnFilter: true,
  },
  {
    accessorKey: "category",
    header: ({ column }) => <TableColumnHeader column={column} />,
    meta: {
      label: "Category",
      variant: "select",
      options: categoryOptions,
      mergeStrategy: "augment",
      dynamicCounts: true,
      showCounts: true,
    },
    enableColumnFilter: true,
  },
  {
    accessorKey: "brand",
    header: ({ column }) => <TableColumnHeader column={column} />,
    meta: {
      label: "Brand",
      variant: "select",
      autoOptions: true,
      dynamicCounts: true,
      showCounts: true,
    },
    enableColumnFilter: true,
  },
  {
    accessorKey: "price",
    header: ({ column }) => <TableColumnHeader column={column} />,
    meta: {
      label: "Price",
      variant: "number",
      unit: "$",
    },
    enableColumnFilter: true,
  },
]
```

### `<DataTable />` component

Next, we'll add the filter and sort menu components.

```tsx showLineNumbers title="advanced-table.tsx"
"use client"

import {
  DataTableRoot,
  DataTableToolbarSection,
  DataTable,
  DataTableHeader,
  DataTableBody,
  DataTablePagination,
  DataTableSearchFilter,
  DataTableViewMenu,
  DataTableSortMenu,
  DataTableFilterMenu,
  DataTableEmptyBody,
} from "@/components/data-table"
import { TableColumnHeader } from "@/components/data-table/components"
import type { DataTableColumnDef } from "@/components/data-table/types"

type Product = {
  id: string
  name: string
  category: string
  brand: string
  price: number
}

const columns: DataTableColumnDef<Product>[] = [
  {
    accessorKey: "name",
    header: ({ column }) => <TableColumnHeader column={column} />,
    meta: {
      label: "Product Name",
      variant: "text",
    },
    enableColumnFilter: true,
  },
  {
    accessorKey: "category",
    header: ({ column }) => <TableColumnHeader column={column} />,
    meta: {
      label: "Category",
      variant: "select",
      options: [
        { label: "Electronics", value: "electronics" },
        { label: "Clothing", value: "clothing" },
      ],
    },
    enableColumnFilter: true,
  },
  {
    accessorKey: "price",
    header: ({ column }) => <TableColumnHeader column={column} />,
    meta: {
      label: "Price",
      variant: "number",
      unit: "$",
    },
    enableColumnFilter: true,
  },
]

function FilterToolbar() {
  return (
    <DataTableToolbarSection>
      <DataTableToolbarSection className="px-0">
        <DataTableSearchFilter placeholder="Search products..." />
        <DataTableViewMenu />
      </DataTableToolbarSection>
      <DataTableToolbarSection className="px-0">
  <DataTableSortMenu className="ml-auto" />
  <DataTableFilterMenu autoOptions dynamicCounts showCounts mergeStrategy="augment" />
      </DataTableToolbarSection>
    </DataTableToolbarSection>
  )
}

export function AdvancedTable({ data }: { data: Product[] }) {
  return (
    <DataTableRoot
      data={data}
      columns={columns}
      config={{
        enablePagination: true,
        enableSorting: true,
        enableMultiSort: true,
        enableFilters: true,
      }}
    >
      <FilterToolbar />
      <DataTable>
        <DataTableHeader />
        <DataTableBody>
          <DataTableEmptyBody />
        </DataTableBody>
      </DataTable>
      <DataTablePagination />
    </DataTableRoot>
  )
}
```

## Filter Components

### DataTableFilterMenu

The filter menu component allows users to create rule-based filters with multiple conditions.

**Props:**

- `filters?`: Array of `ExtendedColumnFilter` (for controlled mode)
- `onFiltersChange?`: Callback when filters change `(filters: ExtendedColumnFilter[] | null) => void`

```tsx showLineNumbers
<DataTableFilterMenu autoOptions dynamicCounts showCounts mergeStrategy="augment" />
```

### DataTableSortMenu

The sort menu component provides a visual interface for managing column sorting.

**Props:**

- `className?`: Additional CSS classes

```tsx showLineNumbers
<DataTableSortMenu className="ml-auto" />
```

## Column Meta for Filters

Define filter metadata in your column definitions:

```tsx showLineNumbers
{
  accessorKey: "category",
  meta: {
    label: "Category",
    variant: "select",
    options: [
      { label: "Electronics", value: "electronics" },
      { label: "Clothing", value: "clothing" },
    ],
  },
  enableColumnFilter: true,
}
```

Supported variants:

- `"text"` - Text input filter
- `"select"` - Dropdown select filter (requires `options`)
- `"number"` - Number input filter (optional `unit` for display)
- `"boolean"` - Boolean checkbox filter
- `"date"` - Date picker filter

## Controlled State

Full control over table state:

```tsx showLineNumbers
import { useState } from "react"
import type {
  PaginationState,
  SortingState,
  ColumnFiltersState,
} from "@tanstack/react-table"
import type { ExtendedColumnFilter } from "@/components/data-table/types"

export function ControlledAdvancedTable({ data }: { data: Product[] }) {
  const [globalFilter, setGlobalFilter] = useState<string | object>("")
  const [sorting, setSorting] = useState<SortingState>([])
  const [columnFilters, setColumnFilters] = useState<ColumnFiltersState>([])
  const [pagination, setPagination] = useState<PaginationState>({
    pageIndex: 0,
    pageSize: 10,
  })

  const handleFiltersChange = (
    filters: ExtendedColumnFilter<Product>[] | null,
  ) => {
    if (!filters || filters.length === 0) {
      setColumnFilters([])
    } else {
      setColumnFilters(
        filters.map(filter => ({
          id: filter.id,
          value: filter,
        })),
      )
    }
  }

  return (
    <DataTableRoot
      data={data}
      columns={columns}
      config={{
        enablePagination: true,
        enableSorting: true,
        enableMultiSort: true,
        enableFilters: true,
      }}
      state={{
        globalFilter,
        sorting,
        columnFilters,
        pagination,
      }}
      onGlobalFilterChange={setGlobalFilter}
      onSortingChange={setSorting}
      onColumnFiltersChange={setColumnFilters}
      onPaginationChange={setPagination}
    >
      <DataTableToolbarSection>
        <DataTableToolbarSection className="px-0">
          <DataTableSearchFilter placeholder="Search products..." />
          <DataTableViewMenu />
        </DataTableToolbarSection>
        <DataTableToolbarSection className="px-0">
          <DataTableSortMenu className="ml-auto" />
          <DataTableFilterMenu
            filters={[]}
            onFiltersChange={handleFiltersChange}
          />
        </DataTableToolbarSection>
      </DataTableToolbarSection>
      <DataTable>
        <DataTableHeader />
        <DataTableBody>
          <DataTableEmptyBody />
        </DataTableBody>
      </DataTable>
      <DataTablePagination />
    </DataTableRoot>
  )
}
```

## When to Use

**✅ Use Advanced Table when:**

- Users need complex, rule-based filtering
- You want visual filter and sort management
- Multiple filter conditions need to be combined
- You need drag-and-drop sorting interface
- Filter state needs to be managed externally

**❌ Consider other options when:**

- Simple filtering is sufficient (use [Faceted Filter Table](/data-table/faceted-filter-table))
- You prefer inline filters (use [Advanced Inline Filter Table](/data-table/advanced-inline-table))
- You need URL state persistence (use [Advanced Nuqs Table](/data-table/advanced-nuqs-table))

## Next Steps

- [Advanced Inline Filter Table](/data-table/advanced-inline-table) - Build custom inline filter UIs
- [Advanced Nuqs Table](/data-table/advanced-nuqs-table) - Add URL state persistence
